{
    "_comment": "Pelican Keeper - Discord bot for monitoring Pelican Panel game servers",
    "meta": {
        "version": "PLCN_v3",
        "update_url": null
    },
    "exported_at": "2025-01-15T00:00:00+00:00",
    "name": "Pelican Keeper",
    "author": "community@pelican-keeper.dev",
    "uuid": "b9f6a260-8be9-4de0-90bb-4251ef5f9524",
    "description": "Discord bot for real-time monitoring of Pelican Panel game servers. Displays server stats, player counts, and provides server control via Discord.",
    "image": null,
    "tags": [
        "discord",
        "monitoring",
        "pelican"
    ],
    "features": [],
    "docker_images": {
        "Dotnet_8": "ghcr.io/parkervcp/yolks:dotnet_8"
    },
    "file_denylist": [],
    "startup_commands": {
        "Default": "./\"Pelican Keeper\""
    },
    "config": {
        "files": "{}",
        "startup": "{\n    \"done\": [\n        \"Bot is connected and ready!\"\n    ]\n}",
        "logs": "{}",
        "stop": "^^C"
    },
    "scripts": {
        "installation": {
            "script": "#!/bin/bash\n\napt update\napt install -y curl unzip\n\nmkdir -p /mnt/server\ncd /mnt/server\n\nset -euo pipefail\n\nif [[ -z \"${REPO_OWNER:-}\" ]] || [[ -z \"${REPO_NAME:-}\" ]]; then\n  echo \"Error: REPO_OWNER and REPO_NAME must be set.\" >&2\n  exit 1\nfi\n\nREPO=\"${REPO_OWNER}/${REPO_NAME}\"\nASSET_PATTERN=\"linux-x64.zip\"\nINSTALL_DIR=\"${INSTALL_DIR:-./}\"\n\nfor cmd in curl unzip; do\n  command -v \"$cmd\" >/dev/null 2>&1 || { echo \"Error: '$cmd' is required.\" >&2; exit 1; }\ndone\n\ntmpdir=\"$(mktemp -d)\"\ncleanup() { rm -rf \"$tmpdir\"; }\ntrap cleanup EXIT\n\necho \"Fetching latest release from ${REPO}...\"\n\ndownload_url=$(\n  curl -fsSL \"https://api.github.com/repos/$REPO/releases/latest\" |\n  grep -oE '\"browser_download_url\":\\s*\"[^\"]+' |\n  cut -d'\"' -f4 |\n  grep \"$ASSET_PATTERN\" |\n  head -n 1\n)\n\nif [[ -z \"${download_url:-}\" ]]; then\n  echo \"Error: Could not find release asset.\" >&2\n  exit 1\nfi\n\nzip_path=\"${tmpdir}/update.zip\"\ncurl -fL --retry 3 -o \"$zip_path\" \"$download_url\"\nmkdir -p \"$INSTALL_DIR\"\nunzip -o \"$zip_path\" -d \"$INSTALL_DIR\" >/dev/null\n\necho \"Installation completed successfully!\"",
            "container": "ghcr.io/parkervcp/installers:debian",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "üîë Discord Bot Token",
            "description": "Your Discord bot token from the Discord Developer Portal",
            "env_variable": "BOT_TOKEN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "required"
            ],
            "sort": 0
        },
        {
            "name": "üîë Pelican Panel URL",
            "description": "Your Pelican Panel URL (e.g., https://panel.example.com)",
            "env_variable": "SERVER_URL",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "required"
            ],
            "sort": 1
        },
        {
            "name": "üîë Client API Token",
            "description": "Client API token from Pelican Panel ‚Üí API Credentials",
            "env_variable": "CLIENT_TOKEN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "required"
            ],
            "sort": 2
        },
        {
            "name": "üîë Application API Token",
            "description": "Application API token from Pelican Admin ‚Üí API",
            "env_variable": "SERVER_TOKEN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "required"
            ],
            "sort": 3
        },
        {
            "name": "üì¢ Status Channel ID",
            "description": "Discord channel ID where server statuses are posted",
            "env_variable": "CHANNEL_IDS",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "required"
            ],
            "sort": 4
        },
        {
            "name": "üì¢ Notification Channel ID",
            "description": "Channel for update notifications (leave empty to use status channel)",
            "env_variable": "NOTIFICATION_CHANNEL_ID",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "nullable"
            ],
            "sort": 5
        },
        {
            "name": "üé® Display Format",
            "description": "How servers are displayed: Consolidated (dropdown), PerServer (separate embeds), Paginated (pages)",
            "env_variable": "MessageFormat",
            "default_value": "Consolidated",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "in:Consolidated,PerServer,Paginated",
                "required"
            ],
            "sort": 6
        },
        {
            "name": "üé® Sort Servers By",
            "description": "How to sort the server list",
            "env_variable": "MessageSorting",
            "default_value": "Name",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "in:Name,Status,Uptime",
                "required"
            ],
            "sort": 7
        },
        {
            "name": "üé® Sort Direction",
            "description": "Sort order for server list",
            "env_variable": "MessageSortingDirection",
            "default_value": "Ascending",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "in:Ascending,Descending",
                "required"
            ],
            "sort": 8
        },
        {
            "name": "üëÅÔ∏è Hide Offline Servers",
            "description": "Don't show offline servers in the status display",
            "env_variable": "IgnoreOfflineServers",
            "default_value": "0",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "boolean"
            ],
            "sort": 9
        },
        {
            "name": "üëÅÔ∏è Hidden Servers",
            "description": "Server UUIDs to hide from display (comma-separated)",
            "env_variable": "ServersToIgnore",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "nullable"
            ],
            "sort": 10
        },
        {
            "name": "üëÅÔ∏è Hide Servers Without Ports",
            "description": "Hide servers that have no port allocations (like bots)",
            "env_variable": "IgnoreServersWithoutAllocations",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "boolean"
            ],
            "sort": 11
        },
        {
            "name": "üéÆ Show Player Count",
            "description": "Query and display player counts for supported games",
            "env_variable": "PlayerCountDisplay",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "boolean"
            ],
            "sort": 12
        },
        {
            "name": "üéÆ Show Connection IP",
            "description": "Display the IP:Port for connecting to servers",
            "env_variable": "JoinableIpDisplay",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "boolean"
            ],
            "sort": 13
        },
        {
            "name": "üéÆ Allow Start Servers",
            "description": "Let Discord users start servers via bot buttons",
            "env_variable": "AllowUserServerStartup",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "boolean"
            ],
            "sort": 14
        },
        {
            "name": "üéÆ Allow Stop Servers",
            "description": "Let Discord users stop servers via bot buttons",
            "env_variable": "AllowUserServerStopping",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "boolean"
            ],
            "sort": 15
        },
        {
            "name": "‚è∞ Auto-Shutdown Empty Servers",
            "description": "Automatically stop servers when empty for the timeout period",
            "env_variable": "AutomaticShutdown",
            "default_value": "0",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "boolean"
            ],
            "sort": 16
        },
        {
            "name": "‚è∞ Empty Server Timeout",
            "description": "Time before empty server stops (format: HH:MM:SS, e.g., 01:00:00 = 1 hour)",
            "env_variable": "EmptyServerTimeout",
            "default_value": "01:00:00",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "nullable"
            ],
            "sort": 17
        },
        {
            "name": "‚è∞ Auto-Shutdown Servers",
            "description": "Server UUIDs for auto-shutdown (comma-separated, empty = all)",
            "env_variable": "ServersToAutoShutdown",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "nullable"
            ],
            "sort": 18
        },
        {
            "name": "üîÑ Auto-Update",
            "description": "Automatically download and apply updates",
            "env_variable": "AUTO_UPDATE",
            "default_value": "0",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "boolean"
            ],
            "sort": 19
        },
        {
            "name": "üîÑ Update Notifications",
            "description": "Post to Discord when updates are available",
            "env_variable": "NotifyOnUpdate",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "boolean"
            ],
            "sort": 20
        },
        {
            "name": "‚öôÔ∏è Refresh Interval",
            "description": "Seconds between server data refreshes (minimum 10)",
            "env_variable": "ServerUpdateInterval",
            "default_value": "10",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "integer",
                "min:10"
            ],
            "sort": 21
        },
        {
            "name": "‚öôÔ∏è External Server IP",
            "description": "Public IP to display for local network servers (optional)",
            "env_variable": "EXTERNAL_SERVER_IP",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "nullable"
            ],
            "sort": 22
        },
        {
            "name": "‚öôÔ∏è Debug Mode",
            "description": "Enable verbose logging for troubleshooting",
            "env_variable": "Debug",
            "default_value": "0",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "boolean"
            ],
            "sort": 23
        },
        {
            "name": "‚öôÔ∏è Repository Owner",
            "description": "GitHub username/org for updates (your fork owner)",
            "env_variable": "REPO_OWNER",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "required"
            ],
            "sort": 24
        },
        {
            "name": "‚öôÔ∏è Repository Name",
            "description": "GitHub repository name for updates (usually Pelican-Keeper)",
            "env_variable": "REPO_NAME",
            "default_value": "Pelican-Keeper",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "string",
                "required"
            ],
            "sort": 25
        }
    ]
}